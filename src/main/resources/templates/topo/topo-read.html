<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head th:replace="~{fragments/head :: head}"></head>
<body>
<header>

</header>

<div class="container-fluid">
   <nav th:replace="~{fragments/nav :: nav}"></nav>

   <div class="row">
      <div class="col-lg-3 col-sm-12">
         <div class="row">
            <div class="col-md-12">
               <div class="card mt-2 mb-2" th:replace="~{topo/topo-info :: topoinfo}"></div>
               <div class="card mt-2 mb-2" th:replace="~{topo/topo-address :: topoaddress}"></div>
            </div>
         </div>
      </div>

      <div class="col-lg-6 col-sm-12">
         <div class="row">
            <div class="card col-md-12 bg-dark text-white mt-2 mb-2">
               <img class="card-img" th:src="@{/images/TOPO/{image}(image=${topoDto.photoLink})}" alt="photo"/>
               <div class="card-img-overlay">
                  <h5 class="card-header" th:text="${topoDto.name}">Topo's name</h5>
                  <p class="card-title" th:text="${topoDto.region}">  </p>
                  <p class="card-text" th:text="${#dates.format(topoDto.date,'dd MMMM yyyy')}">  </p>
               </div>
            </div>
            <div class="card col-md-12 mt-2 mb-2">
               <div class="card-header">
                  <h5 th:text="#{label.description}">description</h5>
               </div>
               <div class="card-text">
                  <p th:text="${topoDto.description}"></p>
               </div>
            </div>

            <div class="card col-md-12 bg-dark text-white mt-2 mb-2" th:if="${topoDto.mapLink!=null}">
               <img class="card-img" th:src="@{/images/TOPO/{image}(image=${topoDto.mapLink})}" alt="photo"/>
            </div>

            <div class="card col-md-12 mt-2 mb-2">
               <div class="card-header">
                  <h5 th:text="#{label.access}">access</h5>
               </div>
               <div class="card-text">
                  <p th:text="${topoDto.access}"></p>
               </div>
            </div>

            <div class="card col-md-12 mt-2 mb-2">
               <div class="card-header">
                  <h5 th:text="#{label.technic}">technic</h5>
               </div>
               <div class="card-text">
                  <p row="3" th:text="${topoDto.technic}"></p>
               </div>
            </div>
         </div>
      </div>

      <div class="col-lg-3 col-sm-12">
         <div class="row">
            <div class="col-md-12" sec:authorize="hasRole('ROLE_ADMIN')">
               <form action="#" th:action="@{/topo/tag/update/{id}(id=${topoDto.id})}"  method="POST" enctype="utf8">
                  <div th:each="tag : ${tags}" >
                     <input type="checkbox" name="taglist" th:value="${tag.id}" th:checked="${tag.activated}">
                     <label   th:text="${tag.name}">Tag</label>
                  </div>
                  <button type="submit" class="btn btn-primary float-right" th:text="#{label.submit}">Submit</button>
               </form>
            </div>

            <div class="col-md-12">
               <form  action="#" th:action="@{/topo/comment/{topoId}(topoId=${topoDto.id})}" method="POST" enctype="utf8">
                  <label for="commentaire" th:text="#{label.comment}">Comment</label>
                  <textarea id="commentaire"  name="commentaire" class="form-control input-sm" rows="3" th:placeholder="#{placeholder.comment}"></textarea>
                  <button type="submit" class="btn btn-primary float-right" th:text="#{label.addComment}">Add comment</button>
               </form>
            </div>

            <div  class="col-md-12" >
               <div class="card mt-2 mb-2" th:each="comment : ${commentDtoList}">
                  <div class="card-header inline-flex">
                     <img class="img-avatar float-left" th:src="@{/images/avatar/{avatar}.png(avatar=${comment.alias})}" alt="avatar"/>
                     <h5  class="center" th:text="${comment.alias}">Alias</h5>
                     <a sec:authorize="hasRole('ROLE_ADMIN')" class="btn btn-danger float-right" th:href="@{/topo/comment/delete/{id}(id=${comment.id})}" th:text="#{label.delete}" >Delete</a>
                  </div>
                  <div class="card-text">
                     <p th:text="${comment.text}"></p>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>


</div>
<footer th:replace="~{fragments/footer :: footer}">&copy; 2019 Escalade</footer>
</body>
</html>